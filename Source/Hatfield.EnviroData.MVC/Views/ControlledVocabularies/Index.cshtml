@{
    ViewBag.Title = "Index";
}

<script src="~/Scripts/jquery.signalR-1.2.2.js"></script>
<!--Reference the autogenerated SignalR hub script. -->

<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">CV Terms</h1>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bar-chart-o fa-fw"></i> Update CV Terms
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <h5><a id="updatecv" href="#">Load Controlled Vocabularies</a></h5>
                    <br />
                    <div id="cvstatus">

                    </div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->

        </div>
    </div>
</div>



<script>
    $(function () {
        // Reference the auto-generated proxy for the hub.
        var cvStatus = $.connection.cVHub;
        // Create a function that the hub can call back to display messages.
        cvStatus.client.sendMessage = function (message) {
            // Add the message to the page.
            $('#cvstatus').text(htmlEncode(message));
        };
        $.connection.hub.start().done(function () {
            $('#updatecv').click(function () {
                // Call the Send method on the hub.
                cvStatus.server.send();
                // Clear text box and reset focus for next comment.
                $('#cvstatus').val('').focus();
            });
        });
    });
    // This optional function html-encodes messages for display in the page.
    function htmlEncode(value) {
        var encodedValue = $('<div />').text(value).html();
        return encodedValue;
    }
</script>
<script src="~/signalr/hubs"></script>